{
  "filename": "deploy-embedded.md",
  "__html": "<h1 id=\"dashboard-embedded%E6%A8%A1%E5%BC%8F%E9%83%A8%E7%BD%B2\">dashboard embedded模式部署 <a class=\"header-anchor\" href=\"#dashboard-embedded%E6%A8%A1%E5%BC%8F%E9%83%A8%E7%BD%B2\">#</a></h1>\n<p>存储模式为embedded模式，支持存储类型有redis、jdbc、rocksdb、memory等<br>\n安装部署如下：</p>\n<h2 id=\"%E5%AE%89%E8%A3%85%E5%B9%B6%E9%83%A8%E7%BD%B2\">安装并部署 <a class=\"header-anchor\" href=\"#%E5%AE%89%E8%A3%85%E5%B9%B6%E9%83%A8%E7%BD%B2\">#</a></h2>\n<p>下载最新<a href=\"https://github.com/changmingxie/tcc-transaction/releases\">RELEASE</a>版本</p>\n<h3 id=\"linux%2Fmac%E7%8E%AF%E5%A2%83\">linux/mac环境 <a class=\"header-anchor\" href=\"#linux%2Fmac%E7%8E%AF%E5%A2%83\">#</a></h3>\n<p><strong>创建dashboard目录</strong></p>\n<pre><code class=\"language-shell\">makdir dashboard \ncd  dashboard  \n</code></pre>\n<p><strong>下载tcc-transaction-dashboard-xxx.tar.gz</strong>，解压到dashboard目录</p>\n<pre><code class=\"language-shell\">dashboard % tar zxvf tcc-transaction-dashboard-2.0.0.tar.gz \nx conf/application.yaml\nx lib/tcc-transaction-dashboard.jar\nx conf/\nx conf/logback.xml\nx bin/\nx bin/startup.sh\nx bin/startup.cmd\nx bin/shutdown.sh\nx bin/shutdown.cmd\ndashboard % tree\n.\n├── bin\n│         ├── shutdown.cmd\n│         ├── shutdown.sh\n│         ├── startup.cmd\n│         └── startup.sh\n├── conf\n│         ├── application.yaml\n│         └── logback.xml\n├── lib\n│         └── tcc-transaction-dashboard.jar\n└── tcc-transaction-dashboard-2.0.0.tar.gz\n\n3 directories, 8 files\ndashboard % \n</code></pre>\n<p>conf/application.yaml配置<a href=\"/zh-cn/docs/tutorial/configurations.html#dashbaord\">详见</a></p>\n<p><strong>启动dashboard</strong></p>\n<pre><code class=\"language-shell\">sh bin/startup.sh\n</code></pre>\n<h3 id=\"windows%E7%8E%AF%E5%A2%83\">windows环境 <a class=\"header-anchor\" href=\"#windows%E7%8E%AF%E5%A2%83\">#</a></h3>\n<p>创建dashboard目录\n下载tcc-transaction-dashboard-xxx.zip，到dashboard目录，并解压\n双击bin/startup.cmd，启动dashboard</p>\n<h3 id=\"%E6%89%93%E5%BC%80dashbaord\">打开dashbaord <a class=\"header-anchor\" href=\"#%E6%89%93%E5%BC%80dashbaord\">#</a></h3>\n<p>默认地址为：<a href=\"http://localhost:22332/tcc-transaction-dashboard\">http://localhost:22332/tcc-transaction-dashboard</a><br>\n默认用户名密码: admin/123456\n<img src=\"../../img/dashboard/tcc_dashboard_not_login.jpg\" alt=\"首页\"></p>\n<h2 id=\"%E6%94%AF%E6%8C%81%E5%AD%98%E5%82%A8%E7%B1%BB%E5%9E%8B\">支持存储类型 <a class=\"header-anchor\" href=\"#%E6%94%AF%E6%8C%81%E5%AD%98%E5%82%A8%E7%B1%BB%E5%9E%8B\">#</a></h2>\n<p>当前支持的存储类型有</p>\n<ul>\n<li>memory</li>\n<li>rocksdb</li>\n<li>jdbc</li>\n<li>redis</li>\n<li>shard-redis</li>\n<li>redis-cluster</li>\n</ul>\n<h3 id=\"memory\">memory <a class=\"header-anchor\" href=\"#memory\">#</a></h3>\n<p>dashboard embedded模式下存储类型为memory，实际意见不大，不过可以方便演示dashboard基本功能<br>\napplication.yaml可如下配置</p>\n<pre><code class=\"language-yaml\"><span class=\"hljs-attr\">server:</span>\n  <span class=\"hljs-attr\">servlet:</span>\n    <span class=\"hljs-attr\">context-path:</span> <span class=\"hljs-string\">/tcc-transaction-dashboard</span>\n  <span class=\"hljs-attr\">port:</span> <span class=\"hljs-number\">22332</span>\n<span class=\"hljs-attr\">logging:</span>\n  <span class=\"hljs-attr\">level:</span>\n    <span class=\"hljs-attr\">root:</span> <span class=\"hljs-string\">info</span>\n<span class=\"hljs-attr\">spring:</span>\n  <span class=\"hljs-attr\">application:</span>\n    <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">tcc-transaction-dashboard</span>\n  <span class=\"hljs-attr\">tcc:</span>\n    <span class=\"hljs-attr\">dashboard:</span>\n      <span class=\"hljs-attr\">connection-mode:</span> <span class=\"hljs-string\">embedded</span>\n    <span class=\"hljs-attr\">storage:</span>\n      <span class=\"hljs-attr\">storage-type:</span> <span class=\"hljs-string\">memory</span>\n</code></pre>\n<h3 id=\"rocksdb\">rocksdb <a class=\"header-anchor\" href=\"#rocksdb\">#</a></h3>\n<p>application.yaml可使用存储类型可以如下配置</p>\n<pre><code class=\"language-yaml\"><span class=\"hljs-attr\">server:</span>\n  <span class=\"hljs-attr\">servlet:</span>\n    <span class=\"hljs-attr\">context-path:</span> <span class=\"hljs-string\">/tcc-transaction-dashboard</span>\n  <span class=\"hljs-attr\">port:</span> <span class=\"hljs-number\">22332</span>\n<span class=\"hljs-attr\">logging:</span>\n  <span class=\"hljs-attr\">level:</span>\n    <span class=\"hljs-attr\">root:</span> <span class=\"hljs-string\">info</span>\n<span class=\"hljs-attr\">spring:</span>\n  <span class=\"hljs-attr\">application:</span>\n    <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">tcc-transaction-dashboard</span>\n  <span class=\"hljs-attr\">tcc:</span>\n    <span class=\"hljs-attr\">dashboard:</span>\n      <span class=\"hljs-attr\">connection-mode:</span> <span class=\"hljs-string\">embedded</span>\n    <span class=\"hljs-attr\">storage:</span>\n      <span class=\"hljs-attr\">storage-type:</span> <span class=\"hljs-string\">rocksdb</span>\n\n</code></pre>\n<h3 id=\"jdbc\">jdbc <a class=\"header-anchor\" href=\"#jdbc\">#</a></h3>\n<p>下载<a href=\"https://github.com/changmingxie/tcc-transaction/blob/master-2.x/tcc-transaction-core/src/main/dbscripts/db.sql\">mysql脚本</a>\napplication.yaml可使用存储类型可以如下配置</p>\n<pre><code class=\"language-yaml\"><span class=\"hljs-attr\">spring:</span>\n  <span class=\"hljs-attr\">tcc:</span>\n    <span class=\"hljs-attr\">dashboard:</span>\n      <span class=\"hljs-attr\">connection-mode:</span> <span class=\"hljs-string\">embedded</span>\n    <span class=\"hljs-attr\">storage:</span>\n      <span class=\"hljs-attr\">storage-type:</span> <span class=\"hljs-string\">jdbc</span>\n      <span class=\"hljs-attr\">jdbc:</span>\n        <span class=\"hljs-attr\">driver-class:</span> <span class=\"hljs-string\">com.mysql.jdbc.Driver</span>\n        <span class=\"hljs-attr\">jdbc-url:</span> <span class=\"hljs-string\">jdbc:mysql://127.0.0.1:3306/TCC?useSSL=false&amp;connectTimeout=1000&amp;socketTimeout=5000</span>\n        <span class=\"hljs-attr\">username:</span> <span class=\"hljs-string\">root</span>\n        <span class=\"hljs-attr\">password:</span> <span class=\"hljs-string\">welcome1</span>\n</code></pre>\n<h3 id=\"reids\">reids <a class=\"header-anchor\" href=\"#reids\">#</a></h3>\n<p>application.yaml可使用存储类型可以如下配置</p>\n<pre><code class=\"language-yaml\"><span class=\"hljs-attr\">server:</span>\n  <span class=\"hljs-attr\">servlet:</span>\n    <span class=\"hljs-attr\">context-path:</span> <span class=\"hljs-string\">/tcc-transaction-dashboard</span>\n  <span class=\"hljs-attr\">port:</span> <span class=\"hljs-number\">22332</span>\n<span class=\"hljs-attr\">logging:</span>\n  <span class=\"hljs-attr\">level:</span>\n    <span class=\"hljs-attr\">root:</span> <span class=\"hljs-string\">info</span>\n<span class=\"hljs-attr\">spring:</span>\n  <span class=\"hljs-attr\">application:</span>\n    <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">tcc-transaction-dashboard</span>\n  <span class=\"hljs-attr\">tcc:</span>\n    <span class=\"hljs-attr\">dashboard:</span>\n      <span class=\"hljs-attr\">connection-mode:</span> <span class=\"hljs-string\">embedded</span>\n    <span class=\"hljs-attr\">storage:</span>\n      <span class=\"hljs-attr\">storage-type:</span> <span class=\"hljs-string\">redis</span>\n      <span class=\"hljs-attr\">redis:</span>\n        <span class=\"hljs-attr\">host:</span> <span class=\"hljs-number\">127.0</span><span class=\"hljs-number\">.0</span><span class=\"hljs-number\">.1</span>\n        <span class=\"hljs-attr\">port:</span> <span class=\"hljs-number\">6379</span>\n        <span class=\"hljs-attr\">database:</span> <span class=\"hljs-number\">0</span>\n        <span class=\"hljs-attr\">pool-config:</span>\n          <span class=\"hljs-attr\">max-total:</span> <span class=\"hljs-number\">100</span>\n          <span class=\"hljs-attr\">max-idle:</span> <span class=\"hljs-number\">100</span>\n          <span class=\"hljs-attr\">min-idle:</span> <span class=\"hljs-number\">10</span>\n          <span class=\"hljs-attr\">max-wait-millis:</span> <span class=\"hljs-number\">300</span>\n</code></pre>\n<h3 id=\"shard-reids\">shard-reids <a class=\"header-anchor\" href=\"#shard-reids\">#</a></h3>\n<p>application.yaml可使用存储类型可以如下配置</p>\n<pre><code class=\"language-yaml\"><span class=\"hljs-attr\">server:</span>\n  <span class=\"hljs-attr\">servlet:</span>\n    <span class=\"hljs-attr\">context-path:</span> <span class=\"hljs-string\">/tcc-transaction-dashboard</span>\n  <span class=\"hljs-attr\">port:</span> <span class=\"hljs-number\">22332</span>\n<span class=\"hljs-attr\">logging:</span>\n  <span class=\"hljs-attr\">level:</span>\n    <span class=\"hljs-attr\">root:</span> <span class=\"hljs-string\">info</span>\n<span class=\"hljs-attr\">spring:</span>\n  <span class=\"hljs-attr\">application:</span>\n    <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">tcc-transaction-dashboard</span>\n  <span class=\"hljs-attr\">tcc:</span>\n    <span class=\"hljs-attr\">dashboard:</span>\n      <span class=\"hljs-attr\">connection-mode:</span> <span class=\"hljs-string\">embedded</span>\n    <span class=\"hljs-attr\">storage:</span>\n      <span class=\"hljs-attr\">storage-type:</span> <span class=\"hljs-string\">shard_redis</span>\n      <span class=\"hljs-attr\">shard-redis:</span>\n        <span class=\"hljs-attr\">nodes:</span>\n          <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">host:</span> <span class=\"hljs-number\">127.0</span><span class=\"hljs-number\">.0</span><span class=\"hljs-number\">.1</span>\n            <span class=\"hljs-attr\">port:</span> <span class=\"hljs-number\">6379</span>\n          <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">host:</span> <span class=\"hljs-number\">127.0</span><span class=\"hljs-number\">.0</span><span class=\"hljs-number\">.1</span>\n            <span class=\"hljs-attr\">port:</span> <span class=\"hljs-number\">6380</span>\n          <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">host:</span> <span class=\"hljs-number\">127.0</span><span class=\"hljs-number\">.0</span><span class=\"hljs-number\">.1</span>\n            <span class=\"hljs-attr\">port:</span> <span class=\"hljs-number\">6381</span>\n</code></pre>\n<h3 id=\"reids-cluster\">reids-cluster <a class=\"header-anchor\" href=\"#reids-cluster\">#</a></h3>\n<p>redis集群搭建可<a href=\"http://www.redis.cn/topics/cluster-tutorial.html\">参考</a>\napplication.yaml可使用存储类型可以如下配置</p>\n<pre><code class=\"language-yaml\"><span class=\"hljs-attr\">server:</span>\n  <span class=\"hljs-attr\">servlet:</span>\n    <span class=\"hljs-attr\">context-path:</span> <span class=\"hljs-string\">/tcc-transaction-dashboard</span>\n  <span class=\"hljs-attr\">port:</span> <span class=\"hljs-number\">22332</span>\n<span class=\"hljs-attr\">logging:</span>\n  <span class=\"hljs-attr\">level:</span>\n    <span class=\"hljs-attr\">root:</span> <span class=\"hljs-string\">info</span>\n<span class=\"hljs-attr\">spring:</span>\n  <span class=\"hljs-attr\">application:</span>\n    <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">tcc-transaction-dashboard</span>\n  <span class=\"hljs-attr\">tcc:</span>\n    <span class=\"hljs-attr\">dashboard:</span>\n      <span class=\"hljs-attr\">connection-mode:</span> <span class=\"hljs-string\">embedded</span>\n    <span class=\"hljs-attr\">storage:</span>\n      <span class=\"hljs-attr\">storage-type:</span> <span class=\"hljs-string\">redis_cluster</span>\n      <span class=\"hljs-attr\">redis-cluster:</span>\n        <span class=\"hljs-attr\">max-attempts:</span> <span class=\"hljs-number\">5</span>\n        <span class=\"hljs-attr\">so-timeout:</span> <span class=\"hljs-number\">300</span>\n        <span class=\"hljs-attr\">connection-timeout:</span> <span class=\"hljs-number\">1000</span>\n        <span class=\"hljs-attr\">nodes:</span>\n          <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">host:</span> <span class=\"hljs-number\">127.0</span><span class=\"hljs-number\">.0</span><span class=\"hljs-number\">.1</span>\n            <span class=\"hljs-attr\">port:</span> <span class=\"hljs-number\">6379</span>\n          <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">host:</span> <span class=\"hljs-number\">127.0</span><span class=\"hljs-number\">.0</span><span class=\"hljs-number\">.1</span>\n            <span class=\"hljs-attr\">port:</span> <span class=\"hljs-number\">6380</span>\n          <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">host:</span> <span class=\"hljs-number\">127.0</span><span class=\"hljs-number\">.0</span><span class=\"hljs-number\">.1</span>\n           <span class=\"hljs-attr\">port:</span> <span class=\"hljs-number\">6381</span>\n</code></pre>\n",
  "link": "/zh-cn/docs/ops/dashboard/deploy-embedded.html",
  "meta": {}
}